!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=15)}([function(t,e){t.exports=class{constructor(t,e,s){this.type=t,this.begin=e,this.end=s}}},function(t,e,s){const i=s(0),n=s(2);t.exports=class extends i{constructor(t,e){super("NegativeSingleValue",e.begin,e.end),this.minus=t,e instanceof n?(this.left_lexeme=e.leftVal.lexeme,this.left_lexeme_begin=e.leftVal.begin,this.left_lexeme_end=e.leftVal.end,this.left_literal=e.leftVal.literal,this.right_lexeme=e.rightVal.lexeme,this.right_lexeme_begin=e.rightVal.begin,this.right_lexeme_end=e.rightVal.end,this.right_literal=e.rightVal.literal,this.vr_operator=e.operator,this.begin=e.leftVal.begin,this.end=e.rightVal.end):(this.lexeme=e.lexeme,this.literal=e.literal)}}},function(t,e){t.exports=class{constructor(t,e,s){this.type="ValueRange",this.leftVal=t,this.operator=e,this.rightVal=s,this.begin=t.begin,this.end=s.end}}},function(t,e){t.exports=class{constructor(t,e){this.type="Unary",this.operator=t,this.right=e}}},function(t,e){t.exports=class{constructor(t,e,s){this.type="Binary",this.left=t,this.operator=e,this.right=s}}},function(t,e,s){const i=s(0),n=s(6);t.exports=class extends i{constructor(t,e,s){super("Has",t.begin,s.end),this.key=t,this.key.type="key",this.operator=e,this.value=[],void 0!==arguments[3]?this.value.push(new n(s,arguments[3])):this.value.push(new n(s))}addAttribute(t,e){this.value.push(e),this.value.push(new n(t)),this.end=t.end}}},function(t,e,s){const i=s(1);t.exports=class{constructor(t){this.type="TEXT"===t.type?"TEXT":"Attribute",this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end,t instanceof i&&(this.begin=t.minus.end,this.operator=t.minus),void 0!==arguments[1]&&(this.operator=arguments[1])}}},function(t,e,s){const i=s(0),n=s(2),r=s(17);t.exports=class extends i{constructor(t,e,s){super("CategorizedFilter",t.begin,s instanceof n?s.rightVal.end:s.end),this.attribute=t,this.operator=e,this.attributeFilter=[],this.attributeFilter.push(new r(s))}addAttributeFilter(t,e){this.end=t instanceof n?t.rightVal.end:t.end,this.attributeFilter.push(e),this.attributeFilter.push(new r(t))}}},function(t,e){const s=Object.freeze({TRUE:!0,FALSE:!1,NULL:null,WORD:"WORD",COMPLEX_VALUE:"COMPLEX_VALUE",SIMPLE_VALUE:"SIMPLE_VALUE",QUOTED_TEXT:"QUOTED_TEXT",ATTRIBUTE:"ATTRIBUTE",SORT_ATTRIBUTE:"SORT_ATTRIBUTE",SINGLE_VALUE:"SINGLE_VALUE",OPERATOR:"OPERATOR",TEXT:"TEXT"});t.exports=s},function(t,e,s){const i=s(0),n=s(18);t.exports=class extends i{constructor(t,e,s){super("Sort",t.begin,s.end),this.key=t,this.key.type="key",this.operator=e,this.value=[],void 0!==arguments[3]?(this.value.push(new n(s,arguments[3])),this.end=arguments[3].end):this.value.push(new n(s))}addValue(t,e){this.value.push(e),void 0!==arguments[2]?(this.value.push(new n(t,arguments[2])),this.end=arguments[2].end):(this.value.push(new n(t)),this.end=t.end)}}},function(t,e){t.exports=class{constructor(t,e,s){this.type="Grouping",this.left=t,this.expr=e,this.right=s}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super("PositiveSingleValue",e.begin,e.end),this.operator=t,this.lexeme=e.lexeme,this.literal=e.literal}}},function(t,e){const s=Object.freeze({LEFT_PAREN:"(",RIGHT_PAREN:")",DOT:".",COLON:":",EOF:"(end)",NOT:"not",AND:"and",OR:"or"});t.exports=s},function(t,e){t.exports=class{constructor(t,e,s){this.type=t,this.lexeme=e,this.literal=s,void 0!==arguments[3]&&(this.begin=arguments[3],this.end=arguments[4])}toString(){return this.type+" "+this.lexeme+" "+this.literal}}},function(t,e){t.exports=class extends SyntaxError{constructor(t,e,s){let i="";for(let t=0;t<e;t++)i+=" ";throw super(t+s+"\n"+i+"^")}}},function(t,e,s){const i=s(16),n=s(19),r=s(14),h=s(24),o=s(25);let a=document.getElementById("inQuery"),l=document.getElementById("result"),u=new h(a),c=new o;function p(){try{let t=a.innerText.replace(/\n/g,""),e=u.position;0!==arguments[0]&&c.addState(t,e);let s=new n(t).parse();l.value=JSON.stringify(s,null,4);let h=new i(s,t);a.innerHTML=h.getResult(),u.position=e}catch(t){t instanceof r?l.value=t:(document.getElementById("result").value=t,l.value=t)}}c.addState("",0),a.addEventListener&&a.addEventListener("input",p,!1),document.onkeydown=function(t){if(90===t.keyCode&&t.ctrlKey&&t.shiftKey){let t=c.redo();-1!==t&&(a.innerText=t.line,u.position=t.pos,p(0))}else if(90===t.keyCode&&t.ctrlKey){let t=c.undo();-1!==t&&(a.innerText=t.line,u.position=t.pos,p(0))}else if(t.altKey&&38===t.keyCode){let e=document.createRange();if(window.getSelection().anchorNode===a)return void t.preventDefault();3===window.getSelection().anchorNode.nodeType?e.selectNode(window.getSelection().anchorNode.parentNode):e.selectNode(window.getSelection().anchorNode),document.getSelection().removeAllRanges(),document.getSelection().addRange(e),t.preventDefault()}}},function(t,e,s){const i=s(3),n=s(4),r=s(5),h=s(7),o=s(9),a=s(10),l=s(11),u=s(1);t.exports=class{constructor(t,e){this.resString=this.traverse(t,e)}wrapper(t,e){return'<span class="'+e+'">'+t+"</span>"}divWrapper(){return void 0!==arguments[0]?'<div id="treeWrapper" class="'+arguments[0]+'">':"</div>"}traverse(t,e){let s="";if((t instanceof n||t instanceof a||t instanceof r||t instanceof o||t instanceof h||t instanceof u||t instanceof l)&&(s+=this.divWrapper(t.type)),t instanceof a)s+=this.wrapper(e.substring(t.left.begin,t.left.end),"Parentheses"),s+=this.traverse(t.expr,e),s+=this.wrapper(e.substring(t.right.begin,t.right.end),"Parentheses");else for(let n in t)if(!(t[n]instanceof Object)||t[n]instanceof i||"minus"===n||t[n]instanceof a||"attributeFilter"===n||"value"===n){if(t[n]instanceof a)s+=this.wrapper(e.substring(t[n].left.begin,t[n].left.end),"Parentheses"),s+=this.traverse(t[n].expr,e),s+=this.wrapper(e.substring(t[n].right.begin,t[n].right.end),"Parentheses");else if("type"===n)switch(t.type){case"QuotedText":case"NegativeText":case"key":case"Attribute":case"Value":case"ValueRange":case"TEXT":s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case"NegativeSingleValue":s+=this.wrapper(e.substring(t.minus.begin,t.minus.end),"operator"),s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case"PositiveSingleValue":s+=this.wrapper(e.substring(t.operator.begin,t.operator.end),"operator"),s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case"OPERATOR":case":":case"-":"begin"in t?s+=this.wrapper(e.substring(t.begin,t.end),"operator"):"or"===t.lexeme&&(s+=this.wrapper(e.substring(t.begin,t.end),"operator"))}else if("attributeFilter"===n||"value"===n){"operator"in t[n][0]&&(s+=this.wrapper(e.substring(t[n][0].operator.begin,t[n][0].operator.end),"operator")),s+=this.wrapper(e.substring(t[n][0].begin,t[n][0].end),t[n][0].type),"order"in t[n][0]&&(s+=this.wrapper(e.substring(t[n][0].order.begin,t[n][0].order.end),"order"));for(let i=1;i<t[n].length;i++)s+=this.wrapper(e.substring(t[n][i].begin,t[n][i].end),"operator"),i++,"operator"in t[n][i]&&(s+=this.wrapper(e.substring(t[n][i].operator.begin,t[n][i].operator.end),"operator")),s+=this.wrapper(e.substring(t[n][i].begin,t[n][i].end),t[n][i].type),"order"in t[n][i]&&(s+=this.wrapper(e.substring(t[n][i].order.begin,t[n][i].order.end),"order"))}}else s+=this.traverse(t[n],e);return(t instanceof n||t instanceof a||t instanceof r||t instanceof o||t instanceof h||t instanceof u||t instanceof l)&&(s+=this.divWrapper()),s}getResult(){return this.resString}}},function(t,e,s){const i=s(2),n=s(1),r=s(8);t.exports=class{constructor(t){t instanceof i?(this.type="ValueRange",this.left_lexeme=t.leftVal.lexeme,this.left_lexeme_begin=t.leftVal.begin,this.left_lexeme_end=t.leftVal.end,this.left_literal=t.leftVal.literal,this.right_lexeme=t.rightVal.lexeme,this.right_lexeme_begin=t.rightVal.begin,this.right_lexeme_end=t.rightVal.end,this.right_literal=t.rightVal.literal,this.vr_operator=t.operator,this.begin=t.leftVal.begin,this.end=t.rightVal.end):t instanceof n?(this.type=t.type,this.operator=t.minus,void 0!==t.left_lexeme?(this.left_lexeme=t.left_lexeme,this.left_lexeme_begin=t.left_lexeme_begin,this.left_lexeme_end=t.left_lexeme_end,this.left_literal=t.left_literal,this.right_lexeme=t.right_lexeme,this.right_lexeme_begin=t.right_lexeme_begin,this.right_lexeme_end=t.right_lexeme_end,this.right_literal=t.right_literal,this.vr_operator=t.vr_operator,this.begin=t.begin,this.end=t.end):(this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end)):(this.type="WORD"===t.type?"Value":t.type,t.type===r.TEXT&&(this.type=r.TEXT),this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end)}}},function(t,e){t.exports=class{constructor(t){this.type=t.type,this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end,void 0!==arguments[1]&&(this.order=arguments[1])}}},function(t,e,s){const i=s(20),n=s(12),r=s(8),h=s(14),o=s(13),a=s(4),l=s(3),u=s(10),c=s(5),p=s(21),d=s(22),f=s(11),g=s(1),b=s(2),x=s(7),T=s(9),k=s(23),y=s(6);t.exports=class{constructor(t){this.str=t;let e=new i(this.str);this.tokens=e.scanTokens(),this.current=0}getTree(){return this.orExpression()}parse(){if(0===this.str.length)return this.str;let t;try{t=this.getTree()}catch(e){console.log(e.toString()),t=new k(new o("TEXT",this.str.substring(0,this.tokens[this.current-1].end),this.str.substring(0,this.tokens[this.current-1].end),0,this.tokens[this.current-1].end))}for(;this.current<this.tokens.length-1;){let e,s=this.current,i=new o("OPERATOR","and","and");try{((e=this.getTree())instanceof o||e instanceof b)&&(e=new k(new o("TEXT",this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.tokens[s].begin,this.tokens[this.current-1].end))),t=new a(t,i,e)}catch(e){t=new a(t,i,new k(new o("TEXT",this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.tokens[s].begin,this.tokens[this.current-1].end)))}}return t instanceof o?t.type=r.TEXT:t instanceof b&&(t=new k(new o("TEXT",this.str,this.str,0,this.str.length))),t}orExpression(){let t=this.andExpression(),e=!1;for(;this.matchOperator(n.OR);){let s,i=this.previous(),n=this.current;i.type="OPERATOR";try{null!==(s=this.andExpression())?(s.type===r.WORD&&(s.type=r.TEXT),t=new a(t,i,s)):e=!0}catch(e){t=new a(t,i,new k(new o("TEXT",this.str.substring(this.tokens[n].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[n].begin,this.tokens[this.current-1].end),this.tokens[n].begin,this.tokens[this.current-1].end)))}}return e&&this.current--,t}andExpression(){let t=this.andOperand();if(null===t)return t;t.type===r.WORD&&this.error("AndOperand can not be WORD\n",t.begin);let e=!1;for(;this.matchOperator(n.AND);){let s=this.previous();s.type="OPERATOR";let i=this.andOperand();null!==i?(i.type===r.WORD&&(i.type=r.TEXT),t instanceof x||t instanceof c||t instanceof T||t instanceof f||t instanceof g||t instanceof u||this.error("Missing parentheses before 'and' operator:\n",s.begin-1),t=new a(t,s,i)):e=!0}return e&&this.current--,t}andOperand(){let t=this.item();if(!(t instanceof c||t instanceof T||t instanceof x))return t;let e=t;for(;this.match(",");){let s=this.current-1,i=this.previous(),n=this.item("value");if(null===n)return this.current--,t;if(this.current--,!this.match(r.WORD,r.QUOTED_TEXT,r.COMPLEX_VALUE,r.TEXT))return this.current=s,t;if(n instanceof f)return this.current-=3,t;if(e instanceof x)t.addAttributeFilter(n,i);else{if(n instanceof b)return this.current-=4,t;if(n.type="TEXT"===n.type?"TEXT":"Value",e instanceof c)t.addAttribute(n,i);else if(e instanceof T){if(n instanceof g)return this.current-=3,t;let e=this.tokens[this.current];if(e.type===r.WORD){if("asc"!==e.literal&&"desc"!==e.literal)return t.addValue(n,i),t;t.addValue(n,i,e),this.current++}else t.addValue(n,i)}}}return t}item(){let t=this.unary(arguments[0]||"key");if(null===t)return null;if(t.type!==r.WORD&&!(t instanceof l||t instanceof u||t instanceof p))return t.type=r.TEXT,t;if(t instanceof l)"operator"in t&&("#"===t.operator.type?t=null!==t.right?new f(t.operator,t.right):new k(new o("TEXT",this.str.substring(t.operator.begin,t.operator.end),this.str.substring(t.operator.begin,t.operator.end),t.operator.begin,t.operator.end)):"-"===t.operator.type&&(t=null!==t.right?t.right instanceof p?new d(t.operator,t.right):new g(t.operator,t.right):new k(new o("TEXT",this.str.substring(t.operator.begin,t.operator.end),this.str.substring(t.operator.begin,t.operator.end),t.operator.begin,t.operator.end))));else if(this.match(n.COLON)){let e=this.previous();if("-"===this.tokens[this.current].type){let s=this.current,i=this.advance(),n=this.unary();if("sort by"===t.lexeme)return this.current=s,t;if("has"===t.lexeme)t=new c(t,e,n,i);else if(this.match("..")){let s=new b(n,this.previous(),this.unary());t=new x(new y(t),e,new g(i,s))}else t=new x(new y(t),e,new g(i,n))}else{if("#"===this.tokens[this.current].type)return t;if(this.isAtEnd())return new k(new o("TEXT",this.str.substring(t.begin,e.end),this.str.substring(t.begin,e.end),t.begin,e.end));{let s=this.unary();s.type!==r.WORD&&s.type!==r.COMPLEX_VALUE&&this.error("Unexpected Value\n",s.begin);let i=!1;if(this.match("..")){let n,h=this.previous(),o=this.current-1;if(this.isAtEnd())n=s,i=!0;else{let i=this.unary();if(i.type!==r.WORD)return this.current=o,"sort by"===t.lexeme?new T(t,e,s):"has"===t.lexeme?new c(t,e,s):new x(new y(t),e,s);n=new b(s,h,i)}if("has"===t.lexeme)return this.current=o,new c(t,e,s);if("sort by"===t.lexeme)return this.current=o,new T(t,e,s);if(t=new x(new y(t),e,n),i)return this.current=o,t}else s.type!==r.TEXT&&(s.type="QuotedText"!==s.type?"Value":s.type),t="has"===t.lexeme?new c(t,e,s):"sort by"===t.lexeme?"asc"===this.tokens[this.current].lexeme||"desc"===this.tokens[this.current].lexeme?new T(t,e,s,this.advance()):new T(t,e,s):new x(new y(t),e,s)}}}else{if(t instanceof p)return t;if("expr"in t)return t;if(this.isAtEnd())return t;if(this.match("..")){let e=this.current-1,s=this.previous(),i=this.unary();if(null!==i)return i.type===r.WORD?new b(t,s,i):(this.current=e,t);this.current=e}}return t}unary(){if(this.match("#")||this.match("-")){let t=this.previous();if("key"===arguments[0]){let e=this.primary();return null===e||e.type===r.WORD||e instanceof b||e instanceof p?new l(t,e):(this.current--,t)}{let e=this.item("value");return null===e||e.type===r.WORD||e instanceof b||e instanceof p?new l(t,e):(this.current--,t)}}return void 0!==arguments[0]?this.primary(arguments[0]):this.primary()}primary(){if(this.tokens[this.current].type===r.WORD&&"key"===arguments[0]){this.current++;let t=this.previous();t.lexeme.toUpperCase()in n&&this.error("Operator '"+t.lexeme.toUpperCase()+"' can not be key.\n",t.begin);for(;this.match(r.WORD);){if(this.previous().lexeme.toUpperCase()in n){this.current--;break}t.lexeme+=" "+this.previous().lexeme,t.literal+=" "+this.previous().literal,t.end=this.previous().end}return t}if(this.match(r.WORD,r.COMPLEX_VALUE)){let t=this.previous();if(t.lexeme.toUpperCase()in n&&(t.type="TEXT"),"sort"===t.lexeme){let e=this.advance();"by"===e.lexeme&&(t.lexeme+=" "+e.lexeme,t.literal+=" "+e.literal,t.end=e.end)}return t}if(this.match('"'))return new p(this.previous(),this.advance(),this.advance());if(this.match(r.TEXT))return new k(this.previous());if(this.match(n.LEFT_PAREN)){let t=this.previous(),e=this.getTree();this.check(n.RIGHT_PAREN)?this.advance():this.error("Missing ')' after expression:\n",this.str.length);let s=this.tokens[this.current-1];return new u(t,e,s)}return this.tokens.type!==r.WORD?this.advance():this.tokens[this.current-1].type!==n.LEFT_PAREN?this.advance():null}match(){for(let t=0;t<arguments.length;t++)if(this.check(arguments[t]))return this.advance(),!0;return!1}matchOperator(){for(let t=0;t<arguments.length;t++)if(this.checkOperator(arguments[t]))return this.advance(),!0;return!1}check(t){return!this.isAtEnd()&&this.peek().type===t}checkOperator(t){return!this.isAtEnd()&&this.peek().lexeme===t}advance(){return this.isAtEnd()?null:(this.current++,this.previous())}isAtEnd(){return this.peek().type===n.EOF}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}error(t,e){new h(t,e,this.str)}}},function(t,e,s){const i=s(12),n=s(13);t.exports=class{constructor(t){this.str=t,this.start=0,this.current=0,this.tokens=[]}scanTokens(){for(;!this.isAtEnd();)this.start=this.current,this.scanToken();return this.tokens.push(new n(i.EOF,"",null)),this.tokens}scanToken(){let t=this.advance();switch(!0){case/[(]/.test(t):this.current-1>0&&("-"!==this.tokens[this.tokens.length-1].type&&"#"!==this.tokens[this.tokens.length-1].type||this.identifier()," "!==this.str[this.current-2]&&"("!==this.str[this.current-1]&&this.identifier()),this.addToken(i.LEFT_PAREN,"(",this.start,this.current);break;case/[)]/.test(t):this.addToken(i.RIGHT_PAREN,")",this.start,this.current);break;case/[{]/.test(t):{let t=this.stringBrace();this.addToken("COMPLEX_VALUE",t,this.start,this.current);break}case/[\-]/.test(t):this.current-1>0&&("-"!==this.tokens[this.tokens.length-1].type&&"#"!==this.tokens[this.tokens.length-1].type||this.identifier()),this.addToken("-","-",this.start,this.current);break;case/[#]/.test(t):this.current-1>0&&("#"!==this.tokens[this.tokens.length-1].type&&"-"!==this.tokens[this.tokens.length-1].type||this.identifier()),this.addToken("#","#",this.start,this.current);break;case/["]/.test(t):{this.addToken('"','"',this.start,this.current);let t=this.stringQuote();this.addToken("QUOTED_TEXT",t,this.start,this.current),this.addToken('"','"',this.current-1,this.current);break}case/[:]/.test(t):this.addToken(":",":",this.start,this.current);break;case/[.]/.test(t):"."===this.str[this.current]?(this.advance(),this.addToken("..","..",this.start,this.current)):this.identifier();break;case/[\,]/.test(t):this.addToken(",",",",this.start,this.current);break;case/[\s]/.test(t):this.tokens[this.tokens.length-1].end++;break;default:this.identifier()}}isAtEnd(){return this.current>=this.str.length}advance(){return this.current++,this.str[this.current-1]}addToken(t){if(void 0===arguments[1])this.tokens.push(new n(t,null));else if("object"==typeof arguments[1]&&void 0===arguments[2]){let e=this.str.substring(this.start-this.current);this.tokens.push(new n(t,e,arguments[1]))}else void 0!==arguments[2]?this.tokens.push(new n(t,arguments[1].toString(),arguments[1],arguments[2],arguments[3])):this.tokens.push(new n(t,arguments[1].toString(),arguments[1]))}isDigit(t){return/[\d]/.test(t)}peek(){return this.isAtEnd()?"\0":this.str[this.current]}stringBrace(){for(;"}"!==this.peek()&&!this.isAtEnd();)this.advance();return this.advance(),this.str.substring(this.start+1,this.current-1)}stringQuote(){for(;'"'!==this.peek()&&!this.isAtEnd();)this.advance();return this.advance(),this.str.substring(this.start+1,this.current-1)}isAlpha(t){return/[a-zA-Z_\-*?.]/.test(t)}isText(t){return void 0!==t&&"\0"!==t&&!/[\s:,(){}\-#."*?a-zA-Z_]/.test(t)}identifier(){if(this.isText(this.str[this.current-1])){for(;this.isText(this.peek())||this.isAlphaNumeric(this.peek());)this.advance();this.addToken("TEXT",this.str.substring(this.start,this.current),this.start,this.current)}else{for(;this.isAlphaNumeric(this.peek());)this.advance();for(;/[\s]/.test(this.str[this.current]);)this.advance();let t=this.str.substring(this.start,this.current);if(-1!==t.indexOf("..")){let e=this.start+t.indexOf("..");this.addToken("WORD",this.str.substring(this.start,e).replace(/[\s]/g,""),this.start,e);let s=0;for(;" "===this.str[e+2+s];)s++;this.addToken("..","..",e,e+2+s),""!==this.str.substring(e+2,this.current).replace(/[\s]/g,"")&&this.addToken("WORD",this.str.substring(e+2,this.current).replace(/[\s]/g,""),e+2,this.current)}else this.addToken("WORD",this.str.substring(this.start,this.current).replace(/[\s]/g,""),this.start,this.current)}}isAlphaNumeric(t){return this.isDigit(t)||this.isAlpha(t)}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e,s){super("QuotedText",t.begin,s.end),this.leftQuote=t,this.lexeme=e.lexeme,this.literal=e.literal,this.begin=t.begin,this.end=s.end,this.rightQuote=s}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super("NegativeText",t.begin,e.end),this.minus=t,this.text=e}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super("TEXT",t.begin,t.end),this.lexeme=t.lexeme,this.literal=t.literal}}},function(t,e){t.exports=class{constructor(t){this.field=t}get position(){if(this.pos=0,this.anchorNode=window.getSelection().anchorNode,this.offset=window.getSelection().anchorOffset,this.anchorNode.parentNode===this.field)this.pos=this.offset;else{let t=this.anchorNode;for(;t!==this.field;){for(;null!==t.previousSibling;)this.pos+=t.previousSibling.textContent.length,t=t.previousSibling;t=t.parentNode}this.pos+=this.offset}return this.pos}set position(t){let e=this.field,s=0,i=-1;for(;s<t&&3!==e.nodeType;)i++,null!==e.childNodes[i]&&(s+=e.childNodes[i].textContent.length)>=t&&(s-=(e=e.childNodes[i]).textContent.length,i=-1);document.getSelection().collapse(e,t-s)}}},function(t,e){t.exports=class{constructor(){this.undoStack=[],this.redoStack=[]}undo(){return 0===this.undoStack.length?-1:(this.redoStack.push(this.undoStack.pop()),this.undoStack[this.undoStack.length-1])}redo(){if(0===this.redoStack.length)return-1;let t=this.redoStack.pop();return this.undoStack.push(t),t}addState(t,e){this.undoStack.push({line:t,pos:e}),this.redoStack=[]}}}]);